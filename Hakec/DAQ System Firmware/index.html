
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Calibration%20Scripts/">
      
      
        <link rel="next" href="../Data%20Capture/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>DAQ System Firmware - obsidian-mkdocs template</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amplifier" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="obsidian-mkdocs template" class="md-header__button md-logo" aria-label="obsidian-mkdocs template" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            obsidian-mkdocs template
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DAQ System Firmware
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="obsidian-mkdocs template" class="md-nav__button md-logo" aria-label="obsidian-mkdocs template" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    obsidian-mkdocs template
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Obsidian Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Features/LaTeX%20Math%20Support/" class="md-nav__link">
        LaTeX Math Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Features/Mermaid%20Diagrams/" class="md-nav__link">
        Mermaid diagrams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Features/Text%20Formatting/" class="md-nav__link">
        Text Formatting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Hakec
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Hakec
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Bar%20Cell%20Comparison%20and%20Performance%20Analysis/" class="md-nav__link">
        Bar Cell Comparison and Performance Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Calibrating%20a%203%20Axis%20Load%20Cell/" class="md-nav__link">
        Calibrating a 3 Axis Load Cell
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Calibrating%20a%206%20Axis%20Load%20Cell/" class="md-nav__link">
        Calibrating a 6 Axis Load Cell
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Calibrating%20a%20Single%20Axis%20Load%20Cell/" class="md-nav__link">
        Calibrating a Single Axis Load Cell
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Calibration%20Scripts/" class="md-nav__link">
        Calibration Scripts
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          DAQ System Firmware
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        DAQ System Firmware
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amplifier" class="md-nav__link">
    Amplifier
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signal-conditioning" class="md-nav__link">
    Signal Conditioning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#microcontroller" class="md-nav__link">
    Microcontroller
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-design" class="md-nav__link">
    Final Design
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Data%20Capture/" class="md-nav__link">
        Data Capture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Design%20and%20Implementation%20of%20the%20DAQ/" class="md-nav__link">
        Design and Implementation of the DAQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Hardware%20Components/" class="md-nav__link">
        Haptic Force Feedback Modeling Framework: Component Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../How%20Many%20Axes%20to%20Measure%20%28Force%20or%20Torque%29/" class="md-nav__link">
        How Many Axes to Measure (Force or Torque)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Intro/" class="md-nav__link">
        Intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Learning%20from%20Literature%20Review/" class="md-nav__link">
        Learning from Literature Review
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Mounting%20the%20Force%20Sensor/" class="md-nav__link">
        Mounting the Force Sensor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Procedure/" class="md-nav__link">
        Procedure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Review%20of%20Accelerometers/" class="md-nav__link">
        Review of Accelerometers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Review%20of%20Load%20Cells/" class="md-nav__link">
        Review of Load Cells
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Software%20Components/" class="md-nav__link">
        Software Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../What%20to%20Measure%20and%20What%20It%20Means%20%28Variables%29/" class="md-nav__link">
        What to Measure and What It Means (Variables)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../single-axis%20calibration%20script/" class="md-nav__link">
        Single axis calibration script
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../six-axis%20calibration%20script/" class="md-nav__link">
        Six axis calibration script
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../three-axis%20calibration%20script/" class="md-nav__link">
        Three axis calibration script
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_22" >
      
      
      
        <label class="md-nav__link" for="__nav_3_22" id="__nav_3_22_label" tabindex="0">
          Attachments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_22_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_22">
          <span class="md-nav__icon md-icon"></span>
          Attachments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Attachments/Media%20and%20Images/" class="md-nav__link">
        Media and Images
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Topic 1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Topic 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Topic%201/Note%201/" class="md-nav__link">
        Note 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Topic%201/Note%202/" class="md-nav__link">
        Note 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amplifier" class="md-nav__link">
    Amplifier
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signal-conditioning" class="md-nav__link">
    Signal Conditioning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#microcontroller" class="md-nav__link">
    Microcontroller
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-design" class="md-nav__link">
    Final Design
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>DAQ System Firmware</h1>

<p>"For complete information on the selection process and specific components of our Data Acquisition System (DAQ), you can refer to our comprehensive <a href="[www.google.com](https://www.google.com/)">thesis here</a>. This summary will provide an overview of the DAQ, the operation of our controller board, and how to load the firmware.</p>
<p>The DAQ design comprises two distinct Printed Circuit Boards (PCBs): the primary shield and the extension shield. The primary shield includes voltage regulation, power filtering, three amplifiers, and the Teensy 3.6 microcontroller. This board is suitable for applications that require single 3-axis load cell or single load cells. For more complex applications, we've designed an extension shield, housing an additional nine amplifiers. The combined system meets the requirements for a six-degree-of-freedom plate sensor, providing comprehensive data acquisition and processing.</p>
<p>Power is supplied via a USB connector, and voltage regulation is managed through a Low Dropout (LDO) regulator to stabilize voltage. The signal from the load cells is amplified using an INA333 amplifier, with gain finely tuned via a multiturn trimmer potentiometer. The output of the amplifier is clamped to 3.3 volts to prevent potential damage from overvoltage. The microcontroller performs additional processing, data filtering, and oversampling operations, and it transmits the results for further analysis.</p>
<p>Please refer to the Github repository for the implementation, calibration, and reading from load cells code, with detailed instructions on usage and modification."](&lt;For an in-depth exploration of our Data Acquisition System (DAQ), including component selection and the decision-making process, refer to our detailed thesis. In this summary, I'll outline the integral components, how they contribute to our DAQ operation, and briefly cover the firmware loading process.</p>
<h2 id="amplifier"><strong>Amplifier</strong><a class="headerlink" href="#amplifier" title="Permanent link">&para;</a></h2>
<p>At the heart of our DAQ's signal conditioning is the Instrumentation Amplifier (INA333). This amplifier receives the signal from the load cells, which are typically small and necessitate amplification for further processing. The INA333 was chosen for its precise and low noise amplification capabilities, crucial for accurate data acquisition in our system.</p>
<p>The gain of the INA333 is finely adjustable using a multiturn trimmer potentiometer as the gain-setting resistor. This type of resistor allows us to fine-tune the amplifier's gain to a specific force range applied to the load cells. Calibration is recommended using the maximum expected force for optimal performance.</p>
<p>To ensure the safety of the downstream components and prevent potential overvoltage damage, the amplifier's output is clamped to 3.3 volts using filtering components at the amplifier's output.</p>
<h2 id="signal-conditioning"><strong>Signal Conditioning</strong><a class="headerlink" href="#signal-conditioning" title="Permanent link">&para;</a></h2>
<p>Signal conditioning prepares the load cell's output for digital conversion by the microcontroller. After amplification, the signal is passed through a series of filter components. These filter components serve to eliminate unwanted noise that may distort the signal and affect the accuracy of the data.</p>
<p>A Low Dropout (LDO) regulator and a band-pass filter work in tandem to stabilize the voltage and eliminate power line noise at 50 and 60 Hz, respectively. This treatment ensures a clean supply voltage for the microcontroller and the excitation voltage for the load cells.</p>
<h2 id="microcontroller"><strong>Microcontroller</strong><a class="headerlink" href="#microcontroller" title="Permanent link">&para;</a></h2>
<p>The Teensy 3.6 microcontroller serves as the powerhouse of our DAQ. Its high-speed 180 MHz ARM Cortex-M4 processor, equipped with 256K RAM and 1M Flash memory, facilitates the efficient management of multi-channel load cell data.</p>
<p>This microcontroller also hosts the Analog-to-Digital Converter (ADC). The ADC's role is to sample the conditioned analog signal and convert it into a digital representation. The Teensy 3.6's ADC can clock at 24 MHz for lower precision and 12 MHz for 16-bit precision. The resolution of the ADC is significant as it determines the precision of the digital representation. For our purposes, a 13-bit resolution, representing one of 8192 distinct values, provides the necessary detail. </p>
<p>Our DAQ's primary component is the Teensy 3.6 microcontroller. It boasts a 180 MHz ARM Cortex-M4 processor, 256K RAM, and 1M Flash memory, providing ample processing power to handle multi-channel load cell data.</p>
<p>The DAQ's Analog-to-Digital Converter (ADC) plays a significant role. The Teensy 3.6's ADC is designed for speed and precision, capable of clocking at 24 MHz for lesser precision and 12 MHz for 16-bit precision. In testing, we could read up to 12 channels at over 5kHz with 13 bits of resolution, surpassing the 1kHz baseline. The ADC can represent an analog voltage with 8192 (2^13) distinct values, providing detailed digital representation of the analog signal. The Teensy 3.6 has 25 pins available for analog inputs, enhancing read time optimization.</p>
<h2 id="final-design"><strong>Final Design</strong><a class="headerlink" href="#final-design" title="Permanent link">&para;</a></h2>
<p>Our final DAQ design includes two distinct Printed Circuit Boards (PCBs) - a primary shield and an extension shield. The primary shield, equipped with voltage regulation, power filtering, the microcontroller, and three INA333 amplifiers, caters to applications requiring single or 3-axis load cells. </p>
<p>For more complex data acquisition needs, an extension shield, equipped with nine additional amplifiers, can be attached below the primary shield. Together, the shields can meet the needs of a six-degree-of-freedom plate sensor.</p>
<p>This design choice offers users flexibility and scalability. They can opt for the primary shield for simpler applications or expand their system with the extension shield for more advanced, multi-axis sensor applications. </p>
<p>Power is supplied via a USB connector. The microcontroller performs data filtering, oversampling, and further processing of the signals. After computation, the resultant forces and moments are transmitted to a computer for interpretation and analysis.</p>
<p>For calibration and reading from load cells, the required code and detailed instructions are available in our Github repository. Our goal is to facilitate a seamless user experience and make modifications and use as straightforward as possible. This modular and robust design ensures that our DAQ system is suitable for a wide range of applications, balancing performance, cost, and ease of use.&gt;)</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ArduinoOSC.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span>

<span class="cp">#define NUM_CHANNELS 12 </span><span class="c1">// Number of channels</span>

<span class="c1">// Variables to store the filtered values</span>
<span class="kt">int</span><span class="w"> </span><span class="n">filteredValues</span><span class="p">[</span><span class="n">NUM_CHANNELS</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="c1">// Low pass filter factor</span>
<span class="kt">float</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>

<span class="c1">// Create an OscSender object</span>
<span class="n">OscSender</span><span class="w"> </span><span class="n">sender</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Setup your Serial Communication</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Setup your OSC Sender</span>
<span class="w">  </span><span class="n">sender</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="s">&quot;&lt;IP_ADDRESS&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">);</span><span class="w"> </span><span class="c1">// Replace &lt;IP_ADDRESS&gt; with your computer&#39;s IP</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">NUM_CHANNELS</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Read the raw value from the sensor</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rawValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analogRead</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Apply a simple low-pass filter</span>
<span class="w">    </span><span class="n">filteredValues</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">rawValue</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">alpha</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">filteredValues</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// Prepare the OSC message</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
<span class="w">    </span><span class="n">sprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/loadCell/%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Send the filtered value over OSC</span>
<span class="w">    </span><span class="n">sender</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">buffer</span><span class="p">).</span><span class="n">add</span><span class="p">(</span><span class="n">filteredValues</span><span class="p">[</span><span class="n">i</span><span class="p">]).</span><span class="n">end</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>